<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-dark text-light">
<div  id="productList">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3 py-3">
        <a class="navbar-brand" href="index.html">Premier Meat</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="product.html">Productos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="register.html">Registro</a>
                </li>
            </ul>
            <div class="ms-auto" id="loginFormContainer">
                <form class="d-flex" id="loginForm">
                    <input class="form-control me-2 bg-dark text-light" type="email" placeholder="example@gmail.com" aria-label="Email" required>
                    <input class="form-control me-2 bg-dark text-light" type="password" placeholder="password" aria-label="Contraseña" required>
                    <button class="btn btn-outline-success" type="submit">Login</button>
                </form>
            </div>
        </div>
    </nav>
    <div class="py-2 px-5">
        <h2 class="mb-5">Productos</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card bg-secondary text-light">
                    <img src="images/meat/lomo_Liso.png" class="card-img-top" alt="Lomo liso">
                    <div class="card-body">
                        <h5 class="card-title">Lomo Liso 1k</h5>
                        <p class="card-text">Precio: $15.000/kg</p>
                        <button class="btn btn-primary" onclick="addToCart('Lomo Liso', 15000)">Agregar al Carrito</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card bg-secondary text-light">
                    <img src="images/meat/posta_negra.png" class="card-img-top" alt="Posta Negra">
                    <div class="card-body">
                        <h5 class="card-title">Posta Negra 1k</h5>
                        <p class="card-text">Precio: $8.000/kg</p>
                        <button class="btn btn-primary" onclick="addToCart('Posta Negra', 8000)">Agregar al Carrito</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card bg-secondary text-light">
                    <img src="images/meat/lomo_vetado.png" class="card-img-top" alt="Lomo Vetado">
                    <div class="card-body">
                        <h5 class="card-title">Lomo Vetado 1k</h5>
                        <p class="card-text">Precio: $20.000/kg</p>
                        <button class="btn btn-primary" onclick="addToCart('Lomo Vetado', 20000)">Agregar al Carrito</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card bg-secondary text-light">
                    <img src="images/meat/filete.png" class="card-img-top" alt="Filete">
                    <div class="card-body">
                        <h5 class="card-title">Filete 1k</h5>
                        <p class="card-text">Precio: $25.000/kg</p>
                        <button class="btn btn-primary" onclick="addToCart('Filete', 25000)">Agregar al Carrito</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card bg-secondary text-light">
                    <img src="images/meat/asiento.png" class="card-img-top" alt="Asiento">
                    <div class="card-body">
                        <h5 class="card-title">Asiento 1k</h5>
                        <p class="card-text">Precio: $25.000/kg</p>
                        <button class="btn btn-primary" onclick="addToCart('Asiento', 25000)">Agregar al Carrito</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card bg-secondary text-light">
                    <img src="images/meat/posta_rosada.png" class="card-img-top" alt="Posta Rosada">
                    <div class="card-body">
                        <h5 class="card-title">Posta Rosada 1k</h5>
                        <p class="card-text">Precio: $25.000/kg</p>
                        <button class="btn btn-primary" onclick="addToCart('Posta Rosada', 25000)">Agregar al Carrito</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Carrito de Compras -->
<div class="container mt-5 mb-5" id="cart">
    <h2>Carrito de Compras</h2>
    <table class="table table-dark">
        <thead>
        <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Total</th>
            <th>Acciones</th>
        </tr>
        </thead>
        <tbody id="cartItems">
        <!-- Los items del carrito se agregan dinámicamente aquí -->
        </tbody>
    </table>
    <button class="btn btn-success" onclick="checkout()">Proceder al Pago</button>
</div>

<!-- Formulario de Pago -->
<div class="container mt-5" id="paymentForm" style="display:none;">
    <form class="needs-validation" novalidate>
        <h2>Pago</h2>
        <div class="form-group">
            <label for="cardName">Nombre del Titular:</label>
            <input type="text" class="form-control bg-dark text-light" id="cardName" name="cardName" required>
            <div class="invalid-feedback">Por favor, ingresa el nombre del titular.</div>
        </div>
        <div class="form-group">
            <label for="cardNumber">Número de Tarjeta:</label>
            <input type="text" class="form-control bg-dark text-light" id="cardNumber" name="cardNumber" required>
            <div class="invalid-feedback">Por favor, ingresa un número de tarjeta válido.</div>
        </div>
        <div class="form-group">
            <label for="expiryDate">Fecha de Vencimiento:</label>
            <input type="text" class="form-control bg-dark text-light" id="expiryDate" name="expiryDate" required>
            <div class="invalid-feedback">Por favor, ingresa la fecha de vencimiento.</div>
        </div>
        <div class="form-group">
            <label for="cvv">CVV:</label>
            <input type="text" class="form-control bg-dark text-light" id="cvv" name="cvv" required>
            <div class="invalid-feedback">Por favor, ingresa el CVV.</div>
        </div>
        <button type="submit" class="btn btn-primary">Pagar</button>
    </form>
    <div id="paymentSuccessMessage" style="display:none;">
        <h3>Pago realizado con éxito</h3>
    </div>
</div>

<script type="module">
    import { addToCart, displayCart, removeFromCart, incrementQuantity, decrementQuantity, checkout } from './js/cart.js';
    import { updateLoginState } from './js/formValidation.js';

    window.addToCart = addToCart;
    window.displayCart = displayCart;
    window.removeFromCart = removeFromCart;
    window.incrementQuantity = incrementQuantity;
    window.decrementQuantity = decrementQuantity;
    window.checkout = checkout;

    window.addEventListener('load', updateLoginState);
</script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"></script>
</body>
</html>
